<div *ngIf="{
    vaRecord: vaRecord$ | async
} as params" class="overflow-hidden">
    <div class="mt-4 ml-4 flex justify-between items-center">
        <div>
            <span class="text-2l text-start">CODE VA </span>
        </div>
        <div class="mr-4">
            <mat-icon class="cursor-pointer" mat-dialog-close>close</mat-icon>
        </div>
    </div>
    <div class="grid grid-cols-12 p-2 border m-1">
        <div class="col-span-6 pl-4 pr-4 pb-4 max-h-[800px] overflow-auto relative shadow-lg rounded-lg border-1">
            <div class="pt-2 pb-2 sticky top-[-6vh] z-10 bg-white">
                <span class="px-2 text-2l text-start">VA Document </span>
            </div>
            <table class="w-full divide-y divide-gray-200 table-auto">
                <thead class="bg-white sticky top-[0vh] z-10" *ngIf="params?.vaRecord?.data?.length && odkQuestions?.length">
                    <tr>
                        <th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                           ID 
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Label
                        </th>
                        <th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                            Response
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <ng-container *ngIf="params?.vaRecord?.data?.length && odkQuestions?.length">
                        
                        <tr *ngFor="let question of odkQuestions; let i = index" [ngClass]="{ 'bg-gray-200': i % 2 !== 0 }">
                            @if(params?.vaRecord?.data[0][question?.key] && question?.key !== 'deviceid'){
                                <td class="px-5 py-3 border-b border-gray-200 text-sm ">
                                    <p class="text-gray-900 whitespace-no-wrap">{{ question?.key }}</p>
                                </td>
                                <td class="px-5 py-3 border-b border-gray-200 text-sm ">
                                    <p class="text-gray-900 whitespace-no-wrap">{{ question?.value?.label }}</p>
                                </td>
                                <td class="px-5 py-3 border-b border-gray-200 text-sm ">
                                    @if(question?.value?.options?.length === 0){
                                        <p class="text-gray-900 whitespace-no-wrap">{{ params?.vaRecord?.data[0][question?.key] }}</p>
                                    } @else {
                                        <ng-container *ngFor="let option of question?.value?.options;">
                                            @if(option.value === params?.vaRecord?.data[0][question?.key]){
                                                <p class="text-gray-900 whitespace-no-wrap">{{ option?.label }}</p>
                                            }
                                        </ng-container>
                                    }
                                </td>
                            }
                        </tr>
                    </ng-container>
                    
                </tbody>
            </table>
            @if(!odkQuestions?.length){
                <table class="table">
                    <tr class="w-full divide-y divide-gray-200 table-auto">
                        <td class="px-5 py-3 border-b border-gray-200 text-sm">
                            <p class="text-gray-900 whitespace-no-wrap text-center">Please, load ODK questions to be able to view this ODK</p>
                        </td>
                    </tr>
                </table>
            }
        </div>
        <div class="col-span-6 max-h-[800px] overflow-auto relative  p-4 border m-1">
            <div class="pt-2 pb-2 sticky top-[-6vh] z-10 bg-white">
                <div class="mt-2">
                    <span class="px-2 text-2l text-start">Coding Sheet </span>
                </div>
                <div class="mt-2">
                    <div class="flex items-center mb-4 gap-4">
                        <label class="block text-sm font-medium text-gray-500 w-1/4">Coder's Name:</label>
                        <input type="text" disabled class="flex-1 p-2 border border-gray-300 rounded-md"
                            placeholder="{{ data?.current_user?.name }}">
                    </div>
                </div>
                
                <form>
                    <table class="w-[100%]">
                        <tbody>
                            <tr class="bg-gray-400">
                                <th colspan="2" class="border border-gray-300 px-4 py-2 text-white text-left">
                                    Administrative Data (can be further specified by country)
                                </th>
                            </tr>
                            <tr class="grid grid-cols-12">
                                <td class="col-span-3">Sex:</td>
                                <td class="col-span-3">
                                    <label class="mr-4"><input type="radio" name="sex" class="mr-1"> Female</label>
                                </td>
                                <td class="col-span-3">
                                    <label class="ml-4"><input type="radio" name="sex" class="mr-1"> Male</label>
                                </td>
                                <td class="col-span-3">
                                    <label><input type="radio" name="sex" class="mr-1"> Unknown</label>
                                </td>
                            </tr>
                            <tr class="grid grid-cols-12">
                                <td class="col-span-3">Date of birth:</td>
                                <td class="col-span-3"><input type="date" class="w-full border px-2 py-1 rounded"></td>
                                <td class="col-span-3 ml-4">Date of birth:</td>
                                <td class="col-span-3"><input type="date" class="w-full border px-2 py-1 rounded"></td>
                            </tr>
                            <tr class="bg-gray-400">
                                <th colspan="2" class="border border-gray-300 px-4 py-2 text-white text-left">
                                    FRAME A
                                    <br>
                                    <span class="text-sm">
                                        Medical data: Part 1 and 2
                                    </span>
                                </th>
                            </tr>
                            <tr class="grid grid-cols-12 grid-rows-5">
                                <td class="col-span-4"></td>
                                <td class="col-span-4">Cause of death</td>
                                <td class="col-span-4">Time interval from onset to death</td>
                                <td class="col-span-4 row-span-4">1. Report disease or condition leading to death:</td>
                                <td class="col-span-4 flex">
                                    <label class="mr-4">
                                        a: &nbsp;
                                    </label>
                                    <app-searchable-multi-select
                                        [options]="[{'label': 'Jonas','value': 'Jonas'}, {'label': 'Mwambimbi','value': 'Mwambimbi'}]"
                                        [placeholder]="'Select Disease'"
                                        [singleSelect]="true"
                                    ></app-searchable-multi-select>
                                    
                                </td>
                                <td class="col-span-4"></td>
                                <td class="col-span-4">b</td>
                                <td class="col-span-4"></td>
                                <td class="col-span-4">c</td>
                                <td class="col-span-4"></td>
                                <td class="col-span-4">d</td>
                                <td class="col-span-4"></td>
                            </tr>
                        </tbody>
                    </table>
                </form>
            </div>
        </div>
    </div>

</div>